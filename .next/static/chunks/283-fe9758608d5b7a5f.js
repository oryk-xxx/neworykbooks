(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[283],{283:function(e,a,t){Promise.resolve().then(t.t.bind(t,2972,23)),Promise.resolve().then(t.bind(t,3929))},3929:function(e,a,t){"use strict";t.d(a,{PageEditorForm:function(){return h}});var r=t(7437),l=t(2265),s=t(795),d=t(3662),i=t(9892),n=t(9360);function o(e){let{initialValue:a,onChange:t}=e,[i,o]=(0,l.useState)(()=>(null==a?void 0:a.blocks)&&a.blocks.length>0?a.blocks:[{id:(0,n.Z)(),type:"heading",data:{level:1,text:"T\xedtulo da p\xe1gina"}},{id:(0,n.Z)(),type:"paragraph",data:{text:"Comece a estruturar o conte\xfado desta p\xe1gina em blocos claros e objetivos."}}]);function x(e){o(e),null==t||t({blocks:e})}function p(e){let a={id:(0,n.Z)(),type:e};switch(e){case"heading":a.data={level:2,text:"Novo t\xedtulo"};break;case"paragraph":a.data={text:"Novo par\xe1grafo."};break;case"image":a.data={url:"",caption:""};break;case"link":a.data={label:"Abrir recurso",href:"https://"};break;case"quote":a.data={text:"Uma frase que merece ser isolada.",attribution:""};break;case"divider":a.data={};break;case"list":a.data={style:"bullet",items:["Primeiro ponto"]};break;case"callout":a.data={tone:"tip",text:"Uma observa\xe7\xe3o importante para esta parte."};break;case"embed":a.data={url:"https://",title:""};break;case"wrong_right":a.data={title:"Exemplos de comunica\xe7\xe3o",pairs:[{wrong:"mb, faz isso a\xed",right:"Meu bem, consegue me ajudar com isso?",category:"postura",level:"iniciante",explanation:"A forma certa traz contexto, respeito e clareza, sem perder proximidade."}]}}x([...i,a])}function b(e,a,t){x(i.map(r=>r.id===e?{...r,...t?{type:t}:null,data:{...r.data,...a}}:r))}function m(e){x(i.filter(a=>a.id!==e))}return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,r.jsx)(u,{label:"T\xedtulo",onClick:()=>p("heading")}),(0,r.jsx)(u,{label:"Par\xe1grafo",onClick:()=>p("paragraph")}),(0,r.jsx)(u,{label:"Imagem",onClick:()=>p("image")}),(0,r.jsx)(u,{label:"Link / CTA",onClick:()=>p("link")}),(0,r.jsx)(u,{label:"Cita\xe7\xe3o",onClick:()=>p("quote")}),(0,r.jsx)(u,{label:"Divisor",onClick:()=>p("divider")}),(0,r.jsx)(u,{label:"Lista",onClick:()=>p("list")}),(0,r.jsx)(u,{label:"Callout",onClick:()=>p("callout")}),(0,r.jsx)(u,{label:"Embed",onClick:()=>p("embed")}),(0,r.jsx)(u,{label:"Errado → Certo",onClick:()=>p("wrong_right"),accent:!0})]}),(0,r.jsx)(s.LB,{collisionDetection:s.pE,onDragEnd:function(e){let{active:a,over:t}=e;if(!t||a.id===t.id)return;let r=i.findIndex(e=>e.id===a.id),l=i.findIndex(e=>e.id===t.id);-1!==r&&-1!==l&&x((0,d.Rp)(i,r,l))},children:(0,r.jsx)(d.Fo,{items:i.map(e=>e.id),strategy:d.qw,children:(0,r.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,r.jsx)(c,{block:e,onChange:b,onRemove:m},e.id))})})}),(0,r.jsx)("pre",{className:"mt-4 max-h-64 overflow-auto rounded-xl bg-black/60 p-3 text-[10px] text-zinc-400",children:JSON.stringify({blocks:i},null,2)})]})}function c(e){let{block:a,onChange:t,onRemove:l}=e,{attributes:s,listeners:n,setNodeRef:o,transform:c,transition:p}=(0,d.nB)({id:a.id}),u={transform:i.ux.Transform.toString(c),transition:p};return(0,r.jsxs)("div",{ref:o,style:u,className:"group flex gap-3 rounded-xl border border-borderSubtle/80 bg-black/40 p-3",children:[(0,r.jsx)("button",{type:"button",className:"mt-3 h-5 w-5 shrink-0 cursor-grab rounded-full border border-borderSubtle/70 text-[10px] text-zinc-500 opacity-70 group-hover:opacity-100",...s,...n,children:"::"}),(0,r.jsx)("div",{className:"flex-1 space-y-2",children:(0,r.jsx)(x,{block:a,onChange:t})}),(0,r.jsx)("button",{type:"button",onClick:()=>l(a.id),className:"h-6 w-6 self-start rounded-full border border-red-900/60 text-[10px] text-red-300 opacity-0 transition group-hover:opacity-100",children:"\xd7"})]})}function x(e){let{block:a,onChange:t}=e;return"heading"===a.type?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("select",{className:"h-8 rounded border border-borderSubtle/70 bg-black/60 px-2 text-xs",value:a.data.level,onChange:e=>t(a.id,{level:Number(e.target.value)}),children:[(0,r.jsx)("option",{value:1,children:"H1"}),(0,r.jsx)("option",{value:2,children:"H2"}),(0,r.jsx)("option",{value:3,children:"H3"})]}),(0,r.jsx)("input",{className:"w-full rounded border border-borderSubtle/70 bg-black/60 px-2 py-1 text-sm",value:a.data.text,onChange:e=>t(a.id,{text:e.target.value})})]}):"paragraph"===a.type?(0,r.jsx)("textarea",{className:"min-h-[80px] w-full rounded border border-borderSubtle/70 bg-black/60 px-2 py-1 text-sm",value:a.data.text,onChange:e=>t(a.id,{text:e.target.value})}):"image"===a.type?(0,r.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,r.jsx)("input",{placeholder:"URL da imagem",className:"w-full rounded border border-borderSubtle/70 bg-black/60 px-2 py-1",value:a.data.url,onChange:e=>t(a.id,{url:e.target.value})}),(0,r.jsx)("input",{placeholder:"Legenda (opcional)",className:"w-full rounded border border-borderSubtle/70 bg-black/60 px-2 py-1",value:a.data.caption||"",onChange:e=>t(a.id,{caption:e.target.value})})]}):"link"===a.type?(0,r.jsxs)("div",{className:"grid grid-cols-[2fr_3fr] gap-2 text-xs",children:[(0,r.jsx)("input",{placeholder:"Texto do CTA",className:"rounded border border-borderSubtle/70 bg-black/60 px-2 py-1",value:a.data.label,onChange:e=>t(a.id,{label:e.target.value})}),(0,r.jsx)("input",{placeholder:"URL",className:"rounded border border-borderSubtle/70 bg-black/60 px-2 py-1",value:a.data.href,onChange:e=>t(a.id,{href:e.target.value})})]}):"quote"===a.type?(0,r.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,r.jsx)("textarea",{placeholder:"Texto da cita\xe7\xe3o",className:"min-h-[80px] w-full rounded border border-borderSubtle/70 bg-black/60 px-2 py-1",value:a.data.text,onChange:e=>t(a.id,{text:e.target.value})}),(0,r.jsx)("input",{placeholder:"Autor (opcional)",className:"w-full rounded border border-borderSubtle/70 bg-black/60 px-2 py-1",value:a.data.attribution||"",onChange:e=>t(a.id,{attribution:e.target.value})})]}):"divider"===a.type?(0,r.jsx)("div",{className:"py-2 text-[10px] uppercase tracking-[0.2em] text-zinc-500",children:"Divisor"}):"list"===a.type?(0,r.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,r.jsxs)("select",{className:"h-8 rounded border border-borderSubtle/70 bg-black/60 px-2",value:a.data.style,onChange:e=>t(a.id,{style:e.target.value}),children:[(0,r.jsx)("option",{value:"bullet",children:"Lista com bullets"}),(0,r.jsx)("option",{value:"numbered",children:"Lista numerada"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[a.data.items.map((e,l)=>(0,r.jsx)("input",{className:"w-full rounded border border-borderSubtle/70 bg-black/60 px-2 py-1",value:e,onChange:e=>{let r=[...a.data.items];r[l]=e.target.value,t(a.id,{items:r})}},l)),(0,r.jsx)("button",{type:"button",className:"text-[11px] text-accent",onClick:()=>t(a.id,{items:[...a.data.items,"Novo item"]}),children:"+ Adicionar item"})]})]}):"callout"===a.type?(0,r.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,r.jsxs)("select",{className:"h-8 rounded border border-borderSubtle/70 bg-black/60 px-2",value:a.data.tone,onChange:e=>t(a.id,{tone:e.target.value}),children:[(0,r.jsx)("option",{value:"tip",children:"Dica"}),(0,r.jsx)("option",{value:"info",children:"Info"}),(0,r.jsx)("option",{value:"alert",children:"Alerta"})]}),(0,r.jsx)("textarea",{className:"min-h-[60px] w-full rounded border border-borderSubtle/70 bg-black/60 px-2 py-1",value:a.data.text,onChange:e=>t(a.id,{text:e.target.value})})]}):"embed"===a.type?(0,r.jsxs)("div",{className:"grid grid-cols-[2fr_3fr] gap-2 text-xs",children:[(0,r.jsx)("input",{placeholder:"T\xedtulo (opcional)",className:"rounded border border-borderSubtle/70 bg-black/60 px-2 py-1",value:a.data.title||"",onChange:e=>t(a.id,{title:e.target.value})}),(0,r.jsx)("input",{placeholder:"URL do embed",className:"rounded border border-borderSubtle/70 bg-black/60 px-2 py-1",value:a.data.url,onChange:e=>t(a.id,{url:e.target.value})})]}):"wrong_right"===a.type?(0,r.jsx)(p,{block:a,onChange:e=>t(a.id,e)}):null}function p(e){let{block:a,onChange:t}=e;return(0,r.jsxs)("div",{className:"space-y-3 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[10px] uppercase tracking-[0.2em] text-zinc-500",children:"Bloco especial \xb7 Errado → Certo"}),(0,r.jsx)("input",{placeholder:"T\xedtulo do bloco (opcional)",className:"mt-1 w-full rounded border border-borderSubtle/70 bg-black/60 px-2 py-1",value:a.data.title||"",onChange:e=>t({title:e.target.value})})]}),(0,r.jsx)("button",{type:"button",className:"rounded-full border border-accent/60 px-3 py-1 text-[11px] text-accent",onClick:()=>t({pairs:[...a.data.pairs,{wrong:"",right:"",category:"gramatica",level:"iniciante",explanation:""}]}),children:"+ Par"})]}),(0,r.jsx)("div",{className:"space-y-3",children:a.data.pairs.map((e,l)=>(0,r.jsxs)("div",{className:"space-y-2 rounded-xl border border-borderSubtle/80 bg-zinc-950/60 p-3",children:[(0,r.jsxs)("div",{className:"grid gap-2 md:grid-cols-2",children:[(0,r.jsx)("textarea",{placeholder:"Texto errado",className:"min-h-[60px] w-full rounded border border-red-900/60 bg-red-950/40 px-2 py-1 text-xs",value:e.wrong,onChange:r=>{let s=[...a.data.pairs];s[l]={...e,wrong:r.target.value},t({pairs:s})}}),(0,r.jsx)("textarea",{placeholder:"Texto certo",className:"min-h-[60px] w-full rounded border border-emerald-900/60 bg-emerald-950/40 px-2 py-1 text-xs",value:e.right,onChange:r=>{let s=[...a.data.pairs];s[l]={...e,right:r.target.value},t({pairs:s})}})]}),(0,r.jsxs)("div",{className:"grid gap-2 md:grid-cols-[2fr_2fr_3fr]",children:[(0,r.jsxs)("select",{className:"h-8 rounded border border-borderSubtle/70 bg-black/60 px-2",value:e.category,onChange:r=>{let s=[...a.data.pairs];s[l]={...e,category:r.target.value},t({pairs:s})},children:[(0,r.jsx)("option",{value:"gramatica",children:"Gram\xe1tica"}),(0,r.jsx)("option",{value:"postura",children:"Postura"}),(0,r.jsx)("option",{value:"mensagem",children:"Mensagem"}),(0,r.jsx)("option",{value:"atitude",children:"Atitude"})]}),(0,r.jsxs)("select",{className:"h-8 rounded border border-borderSubtle/70 bg-black/60 px-2",value:e.level,onChange:r=>{let s=[...a.data.pairs];s[l]={...e,level:r.target.value},t({pairs:s})},children:[(0,r.jsx)("option",{value:"iniciante",children:"Iniciante"}),(0,r.jsx)("option",{value:"intermediario",children:"Intermedi\xe1rio"}),(0,r.jsx)("option",{value:"avancado",children:"Avan\xe7ado"})]}),(0,r.jsx)("input",{placeholder:"Explica\xe7\xe3o (opcional)",className:"w-full rounded border border-borderSubtle/70 bg-black/60 px-2 py-1",value:e.explanation||"",onChange:r=>{let s=[...a.data.pairs];s[l]={...e,explanation:r.target.value},t({pairs:s})}})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{type:"button",className:"text-[11px] text-red-400",onClick:()=>{t({pairs:a.data.pairs.filter((e,a)=>a!==l)})},children:"Remover par"})})]},l))})]})}function u(e){return(0,r.jsx)("button",{type:"button",onClick:e.onClick,className:"rounded-full border px-3 py-1 ".concat(e.accent?"border-accent/80 bg-accent/10 text-[11px] text-accent":"border-borderSubtle/70 bg-black/40 text-[11px] text-zinc-200"),children:e.label})}function b(e){let{blocks:a,watermark:t}=e;return(0,r.jsxs)("div",{className:"relative space-y-6 text-sm leading-relaxed",children:[t?(0,r.jsx)("div",{className:"blurred-watermark select-none",children:t}):null,(0,r.jsx)("article",{className:"relative space-y-4 no-select",children:a.map(e=>{switch(e.type){case"heading":{let a=["h1","h2","h3"][e.data.level-1],t=1===e.data.level?"text-2xl":2===e.data.level?"text-xl":"text-lg";return(0,r.jsx)(a,{className:"".concat(t," font-semibold"),children:e.data.text},e.id)}case"paragraph":return(0,r.jsx)("p",{className:"text-zinc-200",children:e.data.text},e.id);case"image":return(0,r.jsxs)("figure",{className:"space-y-2 rounded-xl border border-borderSubtle/80 bg-black/40 p-3",children:[(0,r.jsx)("img",{src:e.data.url,alt:e.data.caption||"",className:"max-h-72 w-full rounded-lg object-cover",draggable:!1}),e.data.caption?(0,r.jsx)("figcaption",{className:"text-xs text-zinc-400",children:e.data.caption}):null]},e.id);case"link":return(0,r.jsx)("a",{href:e.data.href,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 rounded-full border border-accent/40 bg-accentMuted/60 px-3 py-1 text-xs text-accent hover:bg-accent/10",children:(0,r.jsx)("span",{children:e.data.label})},e.id);case"quote":return(0,r.jsxs)("blockquote",{className:"border-l-2 border-accent/70 bg-zinc-900/60 p-3 text-sm text-zinc-200",children:[(0,r.jsxs)("p",{className:"italic",children:["“",e.data.text,"”"]}),e.data.attribution?(0,r.jsxs)("footer",{className:"mt-2 text-xs text-zinc-400",children:["— ",e.data.attribution]}):null]},e.id);case"divider":return(0,r.jsx)("hr",{className:"border-t border-dashed border-borderSubtle/70"},e.id);case"list":return"bullet"===e.data.style?(0,r.jsx)("ul",{className:"list-disc space-y-1 pl-5 text-zinc-200",children:e.data.items.map((e,a)=>(0,r.jsx)("li",{children:e},a))},e.id):(0,r.jsx)("ol",{className:"list-decimal space-y-1 pl-5 text-zinc-200",children:e.data.items.map((e,a)=>(0,r.jsx)("li",{children:e},a))},e.id);case"callout":{let a="alert"===e.data.tone?"border-red-500/60 bg-red-950/40 text-red-50":"tip"===e.data.tone?"border-emerald-500/60 bg-emerald-950/40 text-emerald-50":"border-sky-500/60 bg-sky-950/40 text-sky-50",t="alert"===e.data.tone?"Alerta":"tip"===e.data.tone?"Dica":"Info";return(0,r.jsxs)("div",{className:"rounded-xl border px-4 py-3 text-xs ".concat(a),children:[(0,r.jsx)("p",{className:"mb-1 text-[10px] font-semibold uppercase tracking-wide",children:t}),(0,r.jsx)("p",{children:e.data.text})]},e.id)}case"embed":return(0,r.jsxs)("div",{className:"rounded-xl border border-borderSubtle/80 bg-black/40 p-3 text-xs text-zinc-200",children:[(0,r.jsx)("p",{className:"mb-1 text-[10px] uppercase tracking-wide text-zinc-500",children:"Embed"}),(0,r.jsx)("a",{href:e.data.url,target:"_blank",rel:"noreferrer",className:"break-all text-accent underline-offset-2 hover:underline",children:e.data.title||e.data.url})]},e.id);case"wrong_right":return(0,r.jsx)(m,{block:e},e.id);default:return null}})})]})}function m(e){let{block:a}=e;return(0,r.jsxs)("section",{className:"space-y-3 rounded-2xl border border-borderSubtle/80 bg-zinc-950/70 p-4",children:[(0,r.jsxs)("div",{className:"flex items-baseline justify-between gap-2",children:[(0,r.jsx)("p",{className:"text-[11px] uppercase tracking-[0.2em] text-zinc-500",children:"Bloco especial \xb7 Errado → Certo"}),a.data.title?(0,r.jsx)("p",{className:"text-xs text-zinc-400",children:a.data.title}):null]}),(0,r.jsx)("div",{className:"grid gap-3 md:grid-cols-2",children:a.data.pairs.map((e,a)=>(0,r.jsxs)("div",{className:"space-y-2 rounded-xl border border-borderSubtle/80 bg-black/40 p-3",children:[(0,r.jsxs)("div",{className:"rounded-lg border border-red-900/60 bg-red-950/40 p-3 text-xs",children:[(0,r.jsx)("p",{className:"mb-1 text-[10px] font-semibold uppercase tracking-wide text-red-400",children:"Errado"}),(0,r.jsx)("p",{className:"text-zinc-100",children:e.wrong})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-emerald-900/60 bg-emerald-950/40 p-3 text-xs",children:[(0,r.jsx)("p",{className:"mb-1 text-[10px] font-semibold uppercase tracking-wide text-emerald-400",children:"Certo"}),(0,r.jsx)("p",{className:"text-zinc-100",children:e.right})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-1 text-[10px] text-zinc-400",children:[(0,r.jsxs)("span",{children:["Categoria: ",e.category]}),(0,r.jsxs)("span",{children:["N\xedvel: ",e.level]})]}),e.explanation?(0,r.jsx)("p",{className:"text-[11px] text-zinc-400",children:e.explanation}):null]},a))})]})}function h(e){var a;let{bookId:t,page:s,action:d}=e,[i,n]=(0,l.useState)((null==s?void 0:s.content)||{blocks:[{id:"initial-heading",type:"heading",data:{level:2,text:"T\xedtulo da p\xe1gina"}},{id:"initial-p",type:"paragraph",data:{text:"Comece a escrever aqui..."}}]});return(0,r.jsxs)("div",{className:"grid gap-12 lg:grid-cols-[1.2fr_1fr]",children:[(0,r.jsx)("div",{className:"oryk-surface p-10 space-y-10",children:(0,r.jsxs)("form",{action:d,method:"post",className:"space-y-10",children:[(0,r.jsxs)("div",{className:"grid grid-cols-[2fr_1fr] gap-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("label",{className:"font-mono text-[9px] uppercase tracking-oryk-wide text-text-secondary opacity-50 ml-1",children:"TRANSMISSION_SLUG"}),(0,r.jsx)("input",{name:"slug",required:!0,placeholder:"entry-protocol-01",className:"oryk-input",defaultValue:null==s?void 0:s.slug})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("label",{className:"font-mono text-[9px] uppercase tracking-oryk-wide text-text-secondary opacity-50 ml-1",children:"SEQUENCE_INDEX"}),(0,r.jsx)("input",{name:"order_index",type:"number",required:!0,className:"oryk-input",defaultValue:null!==(a=null==s?void 0:s.order_index)&&void 0!==a?a:1})]})]}),(0,r.jsx)("input",{type:"hidden",name:"content_json",value:JSON.stringify(i)}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("label",{className:"font-mono text-[9px] uppercase tracking-oryk-wide text-text-secondary opacity-50 ml-1",children:"STRUCTURE_BLOCK_ARRAY"}),(0,r.jsx)("div",{className:"border border-white/[0.04] rounded-xl bg-black/40 p-2 shadow-inner",children:(0,r.jsx)(o,{initialValue:i,onChange:n})})]}),(0,r.jsx)("div",{className:"pt-6",children:(0,r.jsx)("button",{type:"submit",className:"oryk-button-accent w-full py-5 text-[11px] uppercase font-bold tracking-oryk-wide",children:s?"UPLINK_SYNCHRONIZATION →":"INIT_NEW_UNIT →"})})]})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between border-b border-white/[0.04] pb-6",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-mono text-[9px] uppercase tracking-oryk-wide text-text-secondary opacity-50",children:"REALTIME_UPLINK_MONITOR"}),(0,r.jsx)("p",{className:"text-sm font-light text-white/40 italic",children:"Live decryption preview"})]})}),(0,r.jsx)("div",{className:"oryk-surface p-10 min-h-[600px] border-white/[0.04] bg-black/[0.15]",children:(0,r.jsx)("div",{className:"prose prose-invert prose-oryk max-w-none",children:(0,r.jsx)(b,{blocks:i.blocks})})})]})]})}}}]);